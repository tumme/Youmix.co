<?  session_start();   if(isset($_GET["logout"]) && $_GET["logout"]==1){      session_destroy();      header('Location: '.$return_url.'');    }  include("config.php");  include("functionSQL.php");  connect();    if(!function_exists("curl_init")) die("cURL extension is not installed");    $PlayListID = $_GET['v'];    // $Cover = $_GET['yt'];    $url = 'http://youmix.co/api.php/playlists/'.$PlayListID;    $ch=curl_init($url);    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);    $r=curl_exec($ch);    curl_close($ch);    $arr = json_decode($r,true);    // Get Detail Playlist    $urlInfoPlaylist = 'http://youmix.co/api.php/playlist/'.$PlayListID;    $chPlaylistInf=curl_init($url);    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);    $rPlaylistInfo=curl_exec($chPlaylistInf);    curl_close($chPlaylistInf);    $arrPlaylistInfo = json_decode($rPlaylistInfo,true);        $PlayListName = $arrPlaylistInfo['PlayListName'];    $CreateBy = $arrPlaylistInfo['name'];    $UserID = $arrPlaylistInfo['user_id'];    // $sql = "SELECT * FROM Playlist WHERE ID =".$_GET['v']."";    // $objQuery  = mysql_query($sql) or die(mysql_error());    // $row = mysql_fetch_assoc($objQuery);    // $PlayListName = $row['PlayListName'];    // $UserID = $row['UserID'];      // Next Playlist     // $nextPlaylist = $_GET['v']-1;    // $sqlNext = "SELECT * FROM Playlist WHERE ID =".$nextPlaylist."";    // $objQueryNext  = mysql_query($sqlNext) or die(mysql_error());    // $rowNext = mysql_fetch_assoc($objQueryNext);    // $PlayListNameNext = $rowNext['PlayListName'];    // $coverNext = $rowNext['Cover'];    // $createBy = $rowNext['UserID'];    // $strSQLnext = "SELECT * FROM users WHERE user_id = '".$createBy."'";    // $objQueryNextUser = mysql_query($strSQLnext) or die(mysql_error());    // $objResultNextUser = mysql_fetch_array($objQueryNextUser);    // $createByName = $objResultNextUser['name'];    // $prePlaylist = $_GET['v']+1;    // $sqlPre = "SELECT * FROM Playlist WHERE ID =".$prePlaylist."";    // $objQueryPre  = mysql_query($sqlPre) or die(mysql_error());    // $rowPre = mysql_fetch_assoc($objQueryPre);    // $PlayListNamePre = $rowPre['PlayListName'];    // $coverPre = $rowPre['Cover'];    // $createByPre = $rowPre['UserID'];    // $strSQLPre = "SELECT * FROM users WHERE user_id = '".$createByPre."'";    // $objQueryPreUser = mysql_query($strSQLPre) or die(mysql_error());    // $objResultPreUser = mysql_fetch_array($objQueryPreUser);    // $createByNamePre = $objResultPreUser['name'];    // $UserID = $row['UserID'];    // $strSQL = "SELECT * FROM users WHERE user_id = '".$UserID."'";    // $objQueryUser = mysql_query($strSQL) or die(mysql_error());    // $objResult = mysql_fetch_array($objQueryUser);    // $Name = $objResult['name'];    // $actual_link = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";    // if($_GET['yt']==""){    //   $cover = $row['Cover'];    // }else{    //   $cover = $_GET['yt'];    // }  ?><!doctype html><!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]--><!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]--><!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]--><!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--><head>  <meta charset="utf-8">  <meta http-equiv="X-UA-Compatible" content="IE=edge" />  <title>Youmix: Discover Music On YOUTUBE Free !</title>  <meta property="og:title"content="<?=$PlayListName;?>" />  <meta property="og:site_name" content="Youmix: Discover Music On YOUTUBE Free !"/>  <meta property="og:url"=content="<?=$actual_link;?>" />  <meta property="og:image"content="http://youmix.co/img/cover.jpg"/>  <meta property="og:description" content="Youmix: Discover Music On YOUTUBE Free !">  <meta property="fb:app_id" content="1498339237072999" />  <meta name="twitter:card" content="summary" />  <meta name="twitter:site" content="@Youmix_co" />  <meta name="twitter:creator" content="@Youmix_co " />  <meta property="og:url" content="<?=$actual_link;?>" />  <meta property="og:title" content="<?=$PlayListName;?>" />  <meta property="og:description" content="Youmix: Discover Music On YOUTUBE Free !" />  <meta property="og:image" content="<?=fetch_highest_res($Cover);?>"/>  <meta name="viewport" content="width=device-width, initial-scale=1">  <link rel="apple-touch-icon" href="apple-touch-icon.png">  <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />  <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />  <link rel="stylesheet" href="css/normalize.min.css">  <link rel="stylesheet" href="css/bootstrap.min.css">  <link rel="stylesheet" href="css/jquery.fancybox.css">  <link rel="stylesheet" href="css/flexslider.css">  <link rel="stylesheet" type="text/css" media="screen" href="youtube-video-player/packages/icons/css/icons.css" />  <link rel="stylesheet" type="text/css" media="screen" href="youtube-video-player/css/youtube-video-player.css" />  <link rel="stylesheet" type="text/css" media="screen" href="youtube-video-player/packages/perfect-scrollbar/perfect-scrollbar.css" />  <link rel="stylesheet" href="css/styles.css">  <link rel="stylesheet" href="css/queries.css">  <link rel="stylesheet" href="css/etline-font.css">  <link rel="stylesheet" href="bower_components/animate.css/animate.min.css">  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">  <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>  <style>  .yesp{    border-radius: 5px;    -webkit-box-shadow: 0 15px 20px rgba(0,0,0,0.2);    -webkit-transform: translate(0, -4px);    overflow: hidden;  }  header{    background: transparent;  }  .footer{    margin-top: 40px;  }  .nav a {  position: absolute;  top: 50%;  display: block;  outline: none;  text-align: left;  z-index: 1000;  -webkit-transform: translateY(-50%);  transform: translateY(-50%);}.nav a.prev {  left: 0;}.nav a.next {  right: 0;}.nav a svg {  display: block;  margin: 0 auto;  padding: 0;}.icon-wrap .fa{ color: #fff; font-size: 24px;}.yesp .yesp-time.yesp-full-time{  width: 88px;}</style></head><body id="top" class="bg-white"> <div class="overlay-hero" data-adaptive-background data-ab-css-background></div>    <!--[if lt IE 8]>    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>    <![endif]-->    <section class="hero" style="min-height: 320px;">      <?php include("navigation.php");?>      <div class="container">        <div class="row">         <div class="col-md-12" style="text-align: center;margin: auto;">            <h3 class="title-player" style="font-weight: 800;margin:auto;margin-bottom:0px;margin-top: 40px;">              <!-- <?=$PlayListName;?>  -->              <small class="pull-right">                <!-- <a href="editplaylist.php?v=<?=$_GET['v'];?>" class="btn btn-link btn-xs" style="margin-left: 12px;">                  <i class="fa fa-pencil" aria-hidden="true"></i>                   Edit                 </a> -->                </small>            </h3>             <!-- <p class="credit-by">Created by <a href="profile.php?id=<?=$UserID;?>"><?=$Name;?></a></p> -->          </div>        </div>      </div>    </section>    <div class="container" style="margin-top: -94px;">      <div class="row">        <div class="nav-growpop nav">            <a class="prev" href="player.php?v=<?=$prePlaylist;?>&VideoID=0">              <span class="icon-wrap">                <i class="fa fa-long-arrow-left" aria-hidden="true"></i>              </span>              <div>                <span>Previous Playlist</span>                <h3><?=$PlayListNamePre;?></h3>                <p>Created by <?=$createByNamePre;?> </p>                <img src="<?=fetch_highest_res($coverPre);?>" alt="Previous Playlist" style="width: 104px;height: 104px; object-fit: cover;"/>              </div>            </a>            <a class="next" href="player.php?v=<?=$nextPlaylist;?>&VideoID=0">              <span class="icon-wrap">               <i class="fa fa-long-arrow-right" aria-hidden="true"></i>              </span>              <div>                <span>Next Playlist</span>                <h3><?=$PlayListNameNext;?></h3>                <p> Covered By <?=$createByName;?> </p>                <img src="<?=fetch_highest_res($coverNext);?>" alt="Next Playlist" style="width: 104px;height: 104px; object-fit: cover;"/>              </div>            </a>          </div>        <div id="playlist"></div>      </div>    </div>     <?php include("footer.php");?>    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>    <script src="bower_components/retina.js/dist/retina.js"></script>    <script src="js/jquery.fancybox.pack.js"></script>    <script src="js/vendor/bootstrap.min.js"></script>    <script src="js/scripts.js"></script>    <script src="js/jquery.flexslider-min.js"></script>    <script src="bower_components/classie/classie.js"></script>    <script src="bower_components/jquery-waypoints/lib/jquery.waypoints.min.js"></script>    <script type="text/javascript" src="youtube-video-player/js/youtube-video-player.jquery.js"></script>    <script type="text/javascript" src="youtube-video-player/packages/perfect-scrollbar/jquery.mousewheel.js"></script>    <script type="text/javascript" src="youtube-video-player/packages/perfect-scrollbar/perfect-scrollbar.js"></script>    <script type="text/javascript" src="js/jquery.adaptive-backgrounds.js"></script>    <script type="text/javascript">    $(document).ready(function() {      var originalURL = window.location.href;      var items = $("#playlist .yesp-playlist-video").length;     // var items = count - 1;      $("#playlist").youtube_video({        videos: [          <?php          foreach($arr['VideoID'] as $val){           $YoutubeID = $val['YoutubeID'];          ?>             '<?=$YoutubeID;?>',           <? } ?>          ],          max_results: 6,          shuffle: false,          pagination: true,          continuous: true,          first_video: <?=$_GET['VideoID']==""?'0':$_GET['VideoID'];?>,          // show_playlist: 'auto',          playlist_type: 'vertical',          show_channel_in_playlist:false,          show_channel_in_title: true,          width: false,          show_annotations: true,          now_playing_text: 'Now Playing',          load_more_text: 'Load More',          autoplay: true,          force_hd: true,          hide_youtube_logo: true,          play_control: true,          time_indicator: 'full',          volume_control: true,          share_control: false,          fwd_bck_control: true,          youtube_link_control: true,          fullscreen_control: true,          playlist_toggle_control:true,          volume: 1,          show_controls_on_load: true,          show_controls_on_pause: true,          show_controls_on_play: false,          player_vars: {},          colors: {          'controls_bg': 'rgba(0,0,0,0.05)',          'playlist_channel':'#FFFFFF',          'video_channel' : '#FFFFFF',          'fill':'#D62550',          'buffer':'rgba(255,255,255,0.2)',          'playlist_overlay':'rgba(0,0,0,0.25)'        },        on_load: function(snippet) {         // console.log(snippet);          $('.thumbnail-playlist').attr('content',snippet.thumbnails.maxres.url);          var vdoID = $('[data-playing=1]').attr("data-vdo"); // will return the string "123"          var dataIndex = $('[data-playing=1]').attr("data-index");         // console.log(dataIndex);                    // $( "#thumbnail-playlist" ).replaceWith( "<h2>New heading</h2>" );        },        on_done_loading: function(videos) {          //console.log("Test")          // var count = $("#playlist .yesp-playlist-video").length;          // var dataIndex = $('[data-playing=1]').attr("data-index");          // console.log(dataIndex);          // console.log(videos.length-1);         // var VID = $('.yesp-playlist-video').attr('data-playing');         // console.log(VID);                      //console.log($('.yesp-hp-video').attr('data-index'));        },        on_state_change: function(state) {                     console.log("state:"+state+"");          var dataIndex = $('[data-playing=1]').attr("data-index");          //console.log(dataIndex);         // console.log("dataIndex:"+ dataIndex + "");         // console.log(items);          if(items == dataIndex & state == 0){           // console.log("Test");          window.location.href = "http://youmix.co/player.php?v=<?=$_GET['v']-1;?>&VideoID=0";          }        },        on_seek: function() {          //console.log("On Seek");        },        on_volume: function() {},        on_time_update: function() {},          });     });    </script>    <script>        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');        ga('create', '<?=$ga;?>', 'auto');        ga('send', 'pageview');    </script>    <?php refresh();?></body></html>